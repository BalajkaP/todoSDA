<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Todo List</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        h1, h2 {
            font-weight: normal;
            text-align: center;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #f2f2f2;
        }

        form {
            display: inline-block;
            margin-right: 10px;
        }

        input[type="text"], input[type="date"], button[type="submit"] {
            font-size: 16px;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            margin-bottom: 10px;
        }

        button[type="submit"] {
            background-color: #4CAF50;
            color: #fff;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .btn-danger {
            background-color: #dc3545;
            color: #fff;
            border: none; 
            padding: 5px 10px;
        }

        button[type="submit"]:hover {
            background-color: #3e8e41;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>Todo List</h1>

    <!-- Display all todos -->
    <table>
        <thead>
        <tr>
            <th>Title</th>
            <th>Date</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <!-- HLAVNÍ PRINCIP: V MVC (THYMELEAF) MOHU POUŽÍVAT JAK PARAMETRY ZADANÉ V METODĚ PRO DANÝ PŘÍKAZ POST, GET, atd.,
             ALE TAKY ATRIBUTY ZADANÉ POMOCÍ Model, JAKO PARAMETR METODY. Rozdíl mezi nimi je , že parametry z metody
             (zde to jsou: tittle, date a id) použiji čistě jako jméno param bez závorek, kdežto ten atribut
              definovaný v Model použiju takto: ${todos} -->
        <!-- VOLÁME ZDE stránky z MvcController !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!-->
        <tr th:each="todo : ${todos}">     <!-- Zde začíná jakoby FOR-EACH, a ten projede všechny "todos" - je to atribut
                                                    z Model v getAllTodos metodě v MvcController. Každá položka v cyklu
                                                    má název todo, a na jednotlivé field se odkazuji klasicky pomocí názvu
                                                    Field v deklaraci Entity (todo.title,todo.dueDate) -->

            <td th:text="${todo.title}"></td>                      <!-- Políčko pro tittle - Název Tasku-->
            <!-- Políčko pro datum.
                 #dates: This is a part of Thymeleaf's utility objects (predefined objects). #dates is specifically for
                 date operations. Thymeleaf provides a variety of utility objects for tasks like working with dates,
                 arrays, lists, and so forth.
                 format(...): This is a method of the #dates utility object. It's used to format date objects. The format
                 method takes two arguments: the date object to be formatted and the pattern to format the date.
                 Převede ten datum tedy z formátu "yyyy-MM-dd"  na 'dd-MM-yyyy' a tak i zobrazí do formuláře!!!!!!!!!!!!-->
            <td th:text="${#dates.format(todo.dueDate, 'dd-MM-yyyy')}"></td>
<!--             <td th:text="${todo.isDone}"></td> -->
            <td th:text="${todo.isDone ? 'done' : 'todo'}"></td> <!-- Políčko pro Status. Pokud field isDone=TRUE, tak
                                                                     vytiskne do formuláře 'done', jinak 'todo'.-->
            <td>
                <!-- Políčko pro Change Status, volám stránku /changeStatus v MvcController-->
                <form th:action="@{/changeStatus}" method="post">
           <!-- Zde pouze pro tuto textovou položku získám název tak že ho ZADÁM JAKO HODNOTU Z DB - TJ."${todo.id}".
                A tak se vlastně i nastaví hodnota "id" z parametru příkazu POST. Je to vlastně v principu stejné,
                jako bych zadal "id" v parametru příkazu POST
                ZDE JDE O JINÝ (DRUHÝ) ZPŮSOB NASTAVENÍ HODNOTY KLÍČOVÉHO PARAMETRU V DANÉM POLÍČKU - ZDE PŘIŘADÍM HODNOTU,
                KDEŽTO NÍŽE V name="title" HODNOTU ZADÁM Z KLÁVESNICE!!!!!!!!!!!!!!!!!!!!!!!!!
        NAKONEC JEŠTĚ PŘI ODESLÁNÍ METODOU POST PROVEDU JEŠTĚ METODU todoService.changeStatus(id) UVNITŘ POST V CONTROLLERu-->
                    <input type="hidden" th:name="id" th:value="${todo.id}"/>
                    <button type="submit">Change Status</button>
                </form>
                <!-- JDE ZDE O TŘETÍ ZPŮSOB NASTAVENÍ HODNOTY KLÍČOVÉHO PARAMETRU V DANÉM POLÍČKU. Zde použiju ten parametr
                     podobně jako v URL kde používám klasický PathVariable. {id} is a placeholder for a path variable,
                     protože metoda deleteTodo je definovaná pro použití PathVariable: "/deleteTodo/{id}" .
                     Každý řádek formuláře = řádek v DB, tj. daná Entita. Jak tedy zde získám to ID:
                     (id=${todo.id}): This part of the expression is filling in the {id} placeholder with the actual ID
                     of the Todo item. It's using a Thymeleaf expression ${...} to insert the value of todo.id into the URL.
                     So, if todo.id is 123, the URL will become /deleteTodo/123. Protože každý řádek formuláře obsahuje
                     patřičné Todo, a tedy i ID.-->
                <!-- Políčko pro Delete, volám stránku /deleteTodo/{id} v MvcController-->
                <form th:action="@{/deleteTodo/{id}(id=${todo.id})}" method="post">
                    <button class="btn-danger" type="submit">Delete</button>
                </form>
            </td>
        </tr>                           <!-- Až zde končí FOR-EACH -->
        </tbody>
    </table>
    <h2>Create Todo</h2>
    <form th:action="@{/createTodo}" method="post">  <!--Jako akci provedu odeslání formuláře pomocí metody createTodo
                                                         v CONTROLLER. Je to stejné, jako bych vynutil POST v
                                                         generated-requests v IntelliJ !!!!!!!!!!!!!!!!!-->
        <label>Title:</label>
        <input type="text" th:name="title" required/>  <!--HLAVNÍ PRINCIP: Zde pouze pro tuto textovou položku získám název
                                                           tak že ho zadám DO FORMULÁŘE. A tak se vlastně i nastaví hodnota "title"
                                                           z parametru příkazu POST. Je to vlastně v principu stejné,
                                                           jako bych zadal "title" v parametru příkazu POST:
                                                    POST http://localhost:8080/createTodo?title=Task2&date=2023-09-10-->
              <!-- JDE ZDE O PRVNÍ ZPŮSOB NASTAVENÍ HODNOTY KLÍČOVÉHO PARAMETRU V DANÉM POLÍČKU - zadám z klávesnice-->
        <br/>
        <label>Date:</label>
        <input type="date" th:name="date" required/>
        <br/>
        <button type="submit">Create</button>
    </form>

</div>
</body>
</html>
